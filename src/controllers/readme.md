üîë Login Authentication Flow

The login functionality in this project is designed to provide a secure, reliable, and user-friendly way for registered users to access the application. When a user attempts to log in, they are required to send their credentials in the request body in JSON format. The request body contains two key fields: usernameOrEmail and password. This flexibility allows users to log in either using their unique username or their registered email address, making the login process more convenient. Once the request is received, the server performs a lookup in the database to identify a user record that matches the given username or email. If no such record exists, the server immediately returns an error message such as ‚ÄúUser not found‚Äù, which ensures that only existing users can proceed with the login process. If a user is found, the server then moves to the next critical step: password verification.

Instead of storing plain text passwords, the system stores hashed versions of passwords using secure hashing algorithms like bcrypt. During login, the password entered by the user is compared with the stored hashed password through a secure comparison function. If the passwords do not match, the server responds with an error message such as ‚ÄúInvalid credentials‚Äù, effectively stopping the authentication process. However, if the password matches successfully, the system recognizes the login attempt as valid and proceeds to generate authentication tokens.

To maintain both security and session management, the server generates two tokens: an Access Token and a Refresh Token. The access token is a short-lived JWT (JSON Web Token), typically valid for about 15‚Äì30 minutes, and is used to authenticate user requests to protected endpoints. The refresh token, on the other hand, has a much longer lifespan, often ranging from 7 to 30 days, and allows the user to obtain new access tokens without needing to log in again. Both tokens usually contain important payload data such as the user‚Äôs unique ID, their username or email, and token expiration details. Once generated, these tokens are sent back to the client, not as plain JSON responses, but inside secure HTTP-only cookies.

Using cookies ensures that tokens are automatically included in subsequent requests while protecting them from client-side JavaScript access, thereby minimizing risks associated with XSS (Cross-Site Scripting) attacks. Additional cookie configurations such as Secure and SameSite further enhance protection by ensuring cookies are only sent over HTTPS and by reducing CSRF (Cross-Site Request Forgery) vulnerabilities.

After the tokens are issued and securely stored in cookies, the server sends back a JSON response to the client, usually containing a success status, a message such as ‚ÄúLogin successful‚Äù, and basic user information like their id, username, and email. This information allows the client application to personalize the user experience while keeping authentication details secure. The tokens themselves remain protected inside cookies, and they are automatically included in subsequent requests without requiring explicit handling by the client.

In summary, the login process begins with a request containing the username or email along with the password, verifies the user‚Äôs identity against the stored credentials, generates both access and refresh tokens upon successful authentication, stores them in secure cookies, and finally returns a response confirming the login. This approach ensures that authentication is handled in a way that balances security, convenience, and scalability, providing a solid foundation for building reliable user sessions in any modern web application.
